var commonCaptcha=function(){"use strict";function g(){}function I(g,I){for(var C in I)g[C]=I[C];return g}function C(g,I,C,t,e){g.__svelte_meta={loc:{file:I,line:C,column:t,char:e}}}function t(g,I){var C={};for(var t in g)t===I||(C[t]=g[t]);return C}function e(g,I){g.appendChild(I)}function A(g,I,C){g.insertBefore(I,C)}function i(g){g.parentNode.removeChild(g)}function s(g){return document.createElement(g)}function a(g){return document.createTextNode(g)}function c(g,I,C,t){g.addEventListener(I,C,t)}function n(g,I,C,t){g.removeEventListener(I,C,t)}function l(g,I,C){null==C?g.removeAttribute(I):g.setAttribute(I,C)}function o(g,I){g.data=""+I}function r(g,I,C){g.style.setProperty(I,C)}function d(){return Object.create(null)}function B(g){g._lock=!0,u(g._beforecreate),u(g._oncreate),u(g._aftercreate),g._lock=!1}function u(g){for(;g&&g.length;)g.shift()()}var F={destroy:function(I){(function(I){this.destroy=g,this.fire("destroy"),this.set=g,this._fragment.d(!1!==I),this._fragment=null,this._state={}}).call(this,I),this.destroy=function(){console.warn("Component was already destroyed")}},get:function(){return this._state},fire:function(g,I){var C=g in this._handlers&&this._handlers[g].slice();if(C)for(var t=0;t<C.length;t+=1){var e=C[t];if(!e.__calling)try{e.__calling=!0,e.call(this,I)}finally{e.__calling=!1}}},on:function(g,I){var C=this._handlers[g]||(this._handlers[g]=[]);return C.push(I),{cancel:function(){var g=C.indexOf(I);~g&&C.splice(g,1)}}},set:function(g){if("object"!=typeof g)throw new Error(this._debugName+".set was called without an object of data key-values to update.");this._checkReadOnly(g),function(g){this._set(I({},g)),this.root._lock||B(this.root)}.call(this,g)},_recompute:g,_set:function(g){var C=this._state,t={},e=!1;for(var A in g=I(this._staged,g),this._staged={},g)this._differs(g[A],C[A])&&(t[A]=e=!0);e&&(this._state=I(I({},C),g),this._recompute(t,this._state),this._bind&&this._bind(t,this._state),this._fragment&&(this.fire("state",{changed:t,current:this._state,previous:C}),this._fragment.p(t,this._state),this.fire("update",{changed:t,current:this._state,previous:C})))},_stage:function(g){I(this._staged,g)},_mount:function(g,I){this._fragment[this._fragment.i?"i":"m"](g,I||null)},_differs:function(g,I){return g!=g?I==I:g!==I||g&&"object"==typeof g||"function"==typeof g}};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var U,Q,p=(function(g,I){var C;C=function(){return function(g){var I={};function C(t){if(I[t])return I[t].exports;var e=I[t]={i:t,l:!1,exports:{}};return g[t].call(e.exports,e,e.exports,C),e.l=!0,e.exports}return C.m=g,C.c=I,C.i=function(g){return g},C.d=function(g,I,t){C.o(g,I)||Object.defineProperty(g,I,{configurable:!1,enumerable:!0,get:t})},C.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return C.d(I,"a",I),I},C.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},C.p="",C(C.s=2)}([function(g,I,C){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g};g.exports={type:function(g){return Object.prototype.toString.call(g).slice(8,-1).toLowerCase()},isObject:function(g,I){return I?"object"===this.type(g):g&&"object"===(void 0===g?"undefined":t(g))},isFormData:function(g){return"undefined"!=typeof FormData&&g instanceof FormData},trim:function(g){return g.replace(/(^\s*)|(\s*$)/g,"")},encode:function(g){return encodeURIComponent(g).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")},formatParams:function(g){var I="",C=!0,t=this;if(!this.isObject(g))return g;return function g(e,A){var i=t.encode,s=t.type(e);if("array"==s)e.forEach(function(I,C){t.isObject(I)||(C=""),g(I,A+"%5B"+C+"%5D")});else if("object"==s)for(var a in e)g(e[a],A?A+"%5B"+i(a)+"%5D":i(a));else C||(I+="&"),C=!1,I+=A+"="+i(e)}(g,""),I},merge:function(g,I){for(var C in I)g.hasOwnProperty(C)?this.isObject(I[C],1)&&this.isObject(g[C],1)&&this.merge(g[C],I[C]):g[C]=I[C];return g}}},,function(g,I,C){var t=function(){function g(g,I){for(var C=0;C<I.length;C++){var t=I[C];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(g,t.key,t)}}return function(I,C,t){return C&&g(I.prototype,C),t&&g(I,t),I}}();var e=C(0),A="undefined"!=typeof document,i=function(){function g(I){function C(g){var I=void 0,C=void 0;function t(){g.p=I=C=null}e.merge(g,{lock:function(){I||(g.p=new Promise(function(g,t){I=g,C=t}))},unlock:function(){I&&(I(),t())},clear:function(){C&&(C("cancel"),t())}})}!function(g,I){if(!(g instanceof I))throw new TypeError("Cannot call a class as a function")}(this,g),this.engine=I||XMLHttpRequest,this.default=this;var t=this.interceptors={response:{use:function(g,I){this.handler=g,this.onerror=I}},request:{use:function(g){this.handler=g}}},A=t.request;C(t.response),C(A),this.config={method:"GET",baseURL:"",headers:{},timeout:0,params:{},parseJson:!0,withCredentials:!1}}return t(g,[{key:"request",value:function(g,I,C){var t=this,i=new this.engine,s="Content-Type",a=s.toLowerCase(),c=this.interceptors,n=c.request,l=c.response,o=n.handler,r=new Promise(function(c,r){function d(g){return g&&g.then&&g.catch}function B(g,I){g?g.then(function(){I()}):I()}e.isObject(g)&&(g=(C=g).url),(C=C||{}).headers=C.headers||{},B(n.p,function(){e.merge(C,JSON.parse(JSON.stringify(t.config)));var u=C.headers;u[s]=u[s]||u[a]||"",delete u[a],C.body=I||C.body,g=e.trim(g||""),C.method=C.method.toUpperCase(),C.url=g;var F=C;o&&(F=o.call(n,C,Promise)||C),d(F)||(F=Promise.resolve(F)),F.then(function(t){t===C?function(C){I=C.body,g=e.trim(C.url);var t=e.trim(C.baseURL||"");if(g||!A||t||(g=location.href),0!==g.indexOf("http")){var n="/"===g[0];if(!t&&A){var o=location.pathname.split("/");o.pop(),t=location.protocol+"//"+location.host+(n?"":o.join("/"))}if("/"!==t[t.length-1]&&(t+="/"),g=t+(n?g.substr(1):g),A){var u=document.createElement("a");u.href=g,g=u.href}}var F=e.trim(C.responseType||""),U=-1!==["GET","HEAD","DELETE","OPTION"].indexOf(C.method),Q=e.type(I),p=C.params||{};U&&"object"===Q&&(p=e.merge(I,p));var b=[];(p=e.formatParams(p))&&b.push(p),U&&I&&"string"===Q&&b.push(I),b.length>0&&(g+=(-1===g.indexOf("?")?"?":"&")+b.join("&")),i.open(C.method,g);try{i.withCredentials=!!C.withCredentials,i.timeout=C.timeout||0,"stream"!==F&&(i.responseType=F)}catch(g){}var x=C.headers[s]||C.headers[a],h="application/x-www-form-urlencoded";for(var m in e.trim((x||"").toLowerCase())===h?I=e.formatParams(I):e.isFormData(I)||-1===["object","array"].indexOf(e.type(I))||(h="application/json;charset=utf-8",I=JSON.stringify(I)),x||U||(C.headers[s]=h),C.headers)if(m===s&&e.isFormData(I))delete C.headers[m];else try{i.setRequestHeader(m,C.headers[m])}catch(g){}function G(g,I,t){B(l.p,function(){if(g){t&&(I.request=C);var e=g.call(l,I,Promise);I=void 0===e?I:e}d(I)||(I=Promise[0===t?"resolve":"reject"](I)),I.then(function(g){c(g)}).catch(function(g){r(g)})})}function X(g){g.engine=i,G(l.onerror,g,-1)}function N(g,I){this.message=g,this.status=I}i.onload=function(){try{var g=i.response||i.responseText;g&&C.parseJson&&-1!==(i.getResponseHeader(s)||"").indexOf("json")&&!e.isObject(g)&&(g=JSON.parse(g));var I=i.responseHeaders;if(!I){I={};var t=(i.getAllResponseHeaders()||"").split("\r\n");t.pop(),t.forEach(function(g){if(g){var C=g.split(":")[0];I[C]=i.getResponseHeader(C)}})}var A=i.status,a=i.statusText,c={data:g,headers:I,status:A,statusText:a};if(e.merge(c,i._response),A>=200&&A<300||304===A)c.engine=i,c.request=C,G(l.handler,c,0);else{var n=new N(a,A);n.response=c,X(n)}}catch(n){X(new N(n.msg,i.status))}},i.onerror=function(g){X(new N(g.msg||"Network Error",0))},i.ontimeout=function(){X(new N("timeout [ "+i.timeout+"ms ]",1))},i._options=C,setTimeout(function(){i.send(U?null:I)},0)}(t):c(t)},function(g){r(g)})})});return r.engine=i,r}},{key:"all",value:function(g){return Promise.all(g)}},{key:"spread",value:function(g){return function(I){return g.apply(null,I)}}}]),g}();i.default=i,["get","post","put","patch","head","delete"].forEach(function(g){i.prototype[g]=function(I,C,t){return this.request(I,C,e.merge({method:g},t))}}),["lock","unlock","clear"].forEach(function(g){i.prototype[g]=function(){this.interceptors.request[g]()}}),g.exports=i}])},g.exports=C()}(U={exports:{}},U.exports),U.exports);(Q=p)&&Q.__esModule&&Object.prototype.hasOwnProperty.call(Q,"default")&&Q.default;var b=new p,x=X("/public/captcha/sms/verify"),h=X("/public/captcha/sms/update"),m=X("/public/captcha/img/update"),G={SMS_VALIDATE_SUCCESS:1,SMS_TIME_OVER:4,NEED_PIC_VALIDATE:5,SMS_SEND_SUCCESS:6,PIC_VALIDATE_FAIL:7,SMS_VALIDATE_FAIL:8,SMS_DAY_BEYOND:9,SMS_TIME_BEYOND:10};function X(g){return("http:"===location.protocol?"http:":"https:")+"//clue.toutiao.com"+g}var N={initValidate:function(){var g=this.get(),I=g.validateType,C=g.validateImgUrl;g.phoneNumber;switch(I){case"pic_before_sms":this.set({smsBtnAvaliable:!0}),!C&&this.refreshImage();break;case"sms":this.countDownInfo()}},closeCaptcha:function(){this.set({captchaDialogShow:!1}),this.fire("close")},back:function(){var g=this;this.fire("back"),this.set({showAnimation:!1}),setTimeout(function(){g.destroy()},500)},spamSubmit:function(g){var I=this;g.preventDefault();var C=this.get(),t=C.phoneNumber,e=C.secretPhoneId,A=this.validateCode(),i=A.state,s=A.reason;console.log(">>>",i,s),i===G.SMS_VALIDATE_SUCCESS?(this.set({smsStatus:G.SMS_VALIDATE_SUCCESS}),b.post(x,{phone_number:t,secret_phone_id:e,sms_code:this.getSmsCode()}).then(function(g){return g.data}).then(function(g){g.data&&g.data.validate_info&&I.handleValidateResult(g.data.validate_info),I.fire("submit",{response:g}),200===g.status?(I.fire("success",{response:g,sms_ticket:g.data.sms_ticket}),I.closeCaptcha()):I.set({spamInfo:g.message})}).catch(function(g){I.fire("error",{error:g}),I.set({spamInfo:g.status+": "+g.message})})):this.set({spamInfo:s,smsStatus:i})},sendSmsCode:function(){var g=this,I=this.get(),C=I.needImgValidate,t=I.valiImgCode,e=I.phoneNumber,A=I.secretPhoneId,i=I.smsBtnAvaliable;!C||t?(this.set({smsStatus:G.SMS_VALIDATE_SUCCESS}),i&&b.post(h,{pic_code:t,phone_number:e,secret_phone_id:A}).then(function(g){return g.data}).then(function(I){g.handleValidateResult(I)}).catch(function(I){g.set({spamInfo:I.status+": "+I.message})})):this.set({spamInfo:"图片验证码不能为空",smsStatus:G.PIC_VALIDATE_FAIL})},handleValidateResult:function(g){void 0===g&&(g={});var I=this.get().validateImgUrl;g.status===G.SMS_SEND_SUCCESS?(this.set({spamInfo:""}),this.countDownInfo()):(g.pic_url&&this.set({validateType:"pic_before_sms",smsStatus:g.status}),this.set({spamInfo:g.message,validateImgUrl:g.pic_url||I}))},countDownInfo:function(){var g=this,I=60,C=null,t=(this.get().smsBtnAvaliable,function(){if(I<0)return clearTimeout(C),void g.set({smsBtnAvaliable:!0,smsSendBtnText:"获取验证码"});g.set({smsBtnAvaliable:!1}),g.set({smsSendBtnText:"重新获取("+I--+")"}),C=setTimeout(t,1e3)});t()},refreshImage:function(){var g=this,I=this.get(),C=I.phoneNumber,t=I.secretPhoneId,e=I.validateImgUrl;b.post(m,{params:{phone_number:C,secret_phone_id:t}}).then(function(g){return g.data}).then(function(I){g.set({validateImgUrl:I.pic_url||e})}).catch(function(I){g.set({spamInfo:I.status+": "+I.message})})},validateCode:function(){var g=this.get(),I=g.needImgValidate,C=g.valiImgCode;return I&&!C?{state:G.PIC_VALIDATE_FAIL,reason:"图片验证码不能为空"}:this.getSmsCode()?{state:G.SMS_VALIDATE_SUCCESS,reason:""}:{state:G.SMS_VALIDATE_FAIL,reason:"短信验证码不能为空"}},getSmsCode:function(){return this.refs.sms.value.trim()}};var y="src/components/captcha.svelte";function Z(g,I){var t,a;function l(I){g.back()}return{c:function(){t=s("div"),(a=s("div")).className="back svelte-1gpyj4v",C(a,y,5,12,329),c(t,"click",l),t.className="back-container svelte-1gpyj4v",C(t,y,4,8,270)},m:function(g,I){A(g,t,I),e(t,a)},d:function(g){g&&i(t),n(t,"click",l)}}}function L(g,I){var t,a;function l(I){g.closeCaptcha()}return{c:function(){t=s("div"),(a=s("span")).textContent="+",C(a,y,12,12,498),c(t,"click",l),t.className="close svelte-1gpyj4v",C(t,y,11,8,440)},m:function(g,I){A(g,t,I),e(t,a)},d:function(g){g&&i(t),n(t,"click",l)}}}function f(g,I){var t,l,r;function d(I){g.spamSubmit(I)}return{c:function(){t=s("div"),l=s("button"),r=a(I.btnText),c(l,"click",d),l.className="sms-btn-submit svelte-1gpyj4v",C(l,y,47,16,1906),C(t,y,46,12,1884)},m:function(g,I){A(g,t,I),e(t,l),e(l,r)},p:function(g,I){g.btnText&&o(r,I.btnText)},d:function(g){g&&i(t),n(l,"click",d)}}}function V(g,I){var t,l;function r(I){g.spamSubmit(I)}return{c:function(){t=s("button"),l=a(I.btnText),c(t,"click",r),t.className="sms-btn-submit svelte-1gpyj4v",C(t,y,54,8,2106)},m:function(g,I){A(g,t,I),e(t,l)},p:function(g,I){g.btnText&&o(l,I.btnText)},d:function(g){g&&i(t),n(t,"click",r)}}}function S(g){var t,u=this;if(this._debugName="<Captcha>",!g||!g.target&&!g.root)throw new Error("'target' is a required option");if(function(g,I){g._handlers=d(),g._slots=d(),g._bind=I._bind,g._staged={},g.options=I,g.root=I.root||g,g.store=I.store||g.root.store,I.root||(g._beforecreate=[],g._oncreate=[],g._aftercreate=[])}(this,g),this.refs={},this._state=I({validateType:"sms",phoneNumber:"",secretPhoneId:"",captchaDialogShow:!0,btnText:"确定",smsSendBtnText:"获取验证码",valiImgCode:"",validateImgUrl:"",smsStatus:G.SMS_VALIDATE_SUCCESS,smsBtnAvaliable:!0,isSlide:!1,showAnimation:!1,spamInfo:"",stylePrefix:"default"},g.data),this._recompute({},this._state),"stylePrefix"in this._state||console.warn("<Captcha> was created without expected data property 'stylePrefix'"),"isSlide"in this._state||console.warn("<Captcha> was created without expected data property 'isSlide'"),"showAnimation"in this._state||console.warn("<Captcha> was created without expected data property 'showAnimation'"),"captchaDialogShow"in this._state||console.warn("<Captcha> was created without expected data property 'captchaDialogShow'"),"valiImgCode"in this._state||console.warn("<Captcha> was created without expected data property 'valiImgCode'"),"validateImgUrl"in this._state||console.warn("<Captcha> was created without expected data property 'validateImgUrl'"),"smsBtnAvaliable"in this._state||console.warn("<Captcha> was created without expected data property 'smsBtnAvaliable'"),"smsSendBtnText"in this._state||console.warn("<Captcha> was created without expected data property 'smsSendBtnText'"),"spamInfo"in this._state||console.warn("<Captcha> was created without expected data property 'spamInfo'"),"btnText"in this._state||console.warn("<Captcha> was created without expected data property 'btnText'"),this._intro=!0,document.getElementById("svelte-1gpyj4v-style")||((t=s("style")).id="svelte-1gpyj4v-style",t.textContent="html, body{-webkit-tap-highlight-color:rgba(0,0,0,0)}.validate-captcha-wrapper.svelte-1gpyj4v{position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(0, 0, 0, 0.5);z-index:999;-webkit-transition:0.3s;transition:0.3s}.validate-captcha-wrapper.slideLeft.svelte-1gpyj4v{z-index:auto;z-index:initial;left:auto;background:none}.validate-captcha-wrapper.svelte-1gpyj4v .validate-dialog.svelte-1gpyj4v{text-align:center;padding:24px 27px 0px;background:#fff;border-radius:8px;position:relative;z-index:1000;top:164px;width:90%;margin:0 auto;box-sizing:border-box}.validate-captcha-wrapper.slideLeft.svelte-1gpyj4v .validate-dialog.svelte-1gpyj4v{position:relative;top:0;padding:40px 24px 0;width:100%;height:100%}.validate-captcha-wrapper.slideLeft.svelte-1gpyj4v .back-container.svelte-1gpyj4v{width:34px;height:32px;position:absolute;top:0;left:0}.validate-captcha-wrapper.slideLeft.svelte-1gpyj4v .back-container .back.svelte-1gpyj4v{width:18px;height:15px;position:absolute;top:16px;left:16px;background-image:url(\"data:image/svg+xml,%3Csvg viewBox='0 0 18 15' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M2.7 8.272h14.512c.45 0 .788-.33.788-.769s-.337-.768-.788-.768H2.7l5.4-5.383c.338-.33.338-.768 0-1.098-.337-.33-.787-.33-1.125 0l-6.75 6.7a.829.829 0 0 0-.225.55c0 .22.113.439.225.549l6.75 6.7c.338.33.788.33 1.125 0 .338-.33.338-.769 0-1.099L2.7 8.272z' fill='%23666' fill-rule='nonzero'/%3E%3C/svg%3E\")}.validate-captcha-wrapper.svelte-1gpyj4v .close.svelte-1gpyj4v{position:absolute;top:1px;right:10px;color:#D7D7D7;font-size:25px;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.validate-captcha-wrapper.svelte-1gpyj4v .title.svelte-1gpyj4v{font-size:16px;color:#333}.validate-captcha-wrapper.svelte-1gpyj4v .sub-title.svelte-1gpyj4v{font-size:12px;margin-top:21px;color:#999999}.validate-captcha-wrapper.svelte-1gpyj4v form.svelte-1gpyj4v{padding:24px 11px}.validate-captcha-wrapper.slideLeft.svelte-1gpyj4v form.svelte-1gpyj4v{padding-left:0;padding-right:0}.validate-captcha-wrapper.svelte-1gpyj4v .pic-validate.svelte-1gpyj4v,.validate-captcha-wrapper.svelte-1gpyj4v .sms-validate.svelte-1gpyj4v{height:43px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end}.validate-captcha-wrapper.svelte-1gpyj4v .sms-validate.svelte-1gpyj4v{border-bottom:1px solid #EAEAEA;position:relative}.validate-captcha-wrapper.svelte-1gpyj4v input.svelte-1gpyj4v{background-color:transparent;border:none;height:100%;padding:0 1px;outline:none;font-size:14px;-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;color:#333;border-bottom:1px solid #EAEAEA}.validate-captcha-wrapper.svelte-1gpyj4v .sms-captcha.svelte-1gpyj4v{border:none}.validate-captcha-wrapper.svelte-1gpyj4v .validate-img.svelte-1gpyj4v{width:74px;height:32px;margin-left:14px;margin-right:10px}.validate-captcha-wrapper.svelte-1gpyj4v .send-sms.svelte-1gpyj4v{width:94px;font-size:14px;line-height:43px;color:#3B9AFF;white-space:nowrap;position:absolute;right:0px}.validate-captcha-wrapper.svelte-1gpyj4v .sms-msg-info.svelte-1gpyj4v{text-align:left;text-align:left;margin-top:4px;font-size:12px;color:#FF4444;height:34px}.validate-captcha-wrapper.svelte-1gpyj4v .sms-btn-submit.svelte-1gpyj4v{width:97%;outline:none;border:none;padding:0;height:48px;background-color:#3B9AFF;color:#fff;border-radius:100px;font-size:18px}.validate-captcha-wrapper.slideLeft.svelte-1gpyj4v .sms-btn-submit.svelte-1gpyj4v{position:absolute;bottom:24px;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:calc(100% - 24px - 24px)}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FwdGNoYS5zdmVsdGUiLCJzb3VyY2VzIjpbImNhcHRjaGEuc3ZlbHRlIl0sInNvdXJjZXNDb250ZW50IjpbIjxkaXYgY2xhc3M9XCJ2YWxpZGF0ZS1jYXB0Y2hhLXdyYXBwZXIge3N0eWxlUHJlZml4fSB7aXNTbGlkZSA/IFwic2xpZGVMZWZ0XCIgOiBcIlwifVwiIHN0eWxlPVwidHJhbnNmb3JtOiB0cmFuc2xhdGVYKHtzaG93QW5pbWF0aW9uIHx8ICFpc1NsaWRlID8gJzAnIDogJzEwMCUnfSk7IGRpc3BsYXk6IHtjYXB0Y2hhRGlhbG9nU2hvdyA/ICdibG9jaycgOiAnbm9uZSd9XCI+XG4gICAgPGRpdiBjbGFzcz1cInZhbGlkYXRlLWRpYWxvZ1wiPlxuXG4gICAgICAgIHsjaWYgaXNTbGlkZX1cbiAgICAgICAgPGRpdiBjbGFzcz1cImJhY2stY29udGFpbmVyXCIgb246Y2xpY2s9XCJiYWNrKClcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJiYWNrXCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7L2lmfVxuXG4gICAgICAgIDwhLS0g5qCH6aKY44CB5YWz6Zet5oyJ6ZKuIC0tPlxuICAgICAgICB7I2lmICFpc1NsaWRlfVxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2xvc2VcIiBvbjpjbGljaz1cImNsb3NlQ2FwdGNoYSgpXCI+XG4gICAgICAgICAgICA8c3Bhbj4rPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgey9pZn1cblxuICAgICAgICA8ZGl2IGNsYXNzPVwidGl0bGVcIj5cbiAgICAgICAgICAgIDxzcGFuPuaJi+acuumqjOivgTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cInN1Yi10aXRsZVwiPlxuICAgICAgICAgICAgPHNwYW4+eyB0aXRsZU5vdGUgfTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGZvcm0+XG5cbiAgICAgICAgICAgIDwhLS0g5Zu+54mH6aqM6K+B56CBIC0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBpYy12YWxpZGF0ZVwiIHN0eWxlPVwiZGlzcGxheToge25lZWRJbWdWYWxpZGF0ZSA/ICdmbGV4JzogJ25vbmUnfVwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwidmFsaWRhdGUtaXRlbSBwaWMtY2FwdGNoYVwiIHBsYWNlaG9sZGVyPVwi6K+36L6T5YWl5Zu+54mH6aqM6K+B56CBXCIgYmluZDp2YWx1ZT12YWxpSW1nQ29kZSBzdHlsZT1cImJvcmRlci1ib3R0b20tY29sb3I6IHtpc0ltZ0Vycm9yID8gJyNGRjQ0NDQnIDogJyd9XCIgLz5cbiAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVwidmFsaWRhdGUtaW1nIHZhbGlkYXRlLWl0ZW1cIiBzcmM9XCJ7dmFsaWRhdGVJbWdVcmx9XCIgYWx0PVwicGljXCIgb246Y2xpY2s9XCJyZWZyZXNoSW1hZ2UoKVwiIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICBcbiAgICAgICAgICAgIDwhLS0g55+t5L+h6aqM6K+B56CBIC0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNtcy12YWxpZGF0ZVwiIHN0eWxlPVwiYm9yZGVyLWJvdHRvbS1jb2xvcjoge2lzU21zRXJyb3IgPyAnI0ZGNDQ0NCcgOiAnJ307IG1hcmdpbi10b3A6IHtuZWVkSW1nVmFsaWRhdGUgPyAnMjdweCcgOiAnMCd9XCI+XG4gICAgICAgICAgICAgICAgPGlucHV0IHJlZjpzbXMgdHlwZT1cIm51bWJlclwiIGNsYXNzPVwidmFsaWRhdGUtaXRlbSBzbXMtY2FwdGNoYVwiIHBsYWNlaG9sZGVyPVwi6K+36L6T5YWl55+t5L+h6aqM6K+B56CBXCIgLz5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInZhbGlkYXRlLWl0ZW0gc2VuZC1zbXNcIiBvcmlnaW4tdGV4dD1cIuiOt+WPlumqjOivgeeggVwiIG9uOmNsaWNrPVwic2VuZFNtc0NvZGUoKVwiIHN0eWxlPVwiY29sb3I6IHtzbXNCdG5BdmFsaWFibGUgPyAnIzNCOUFGRicgOiAncmdiYSgxODEsMTgxLDE4MSwwLjUwKSd9XCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dFwiPnsgc21zU2VuZEJ0blRleHQgfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICBcbiAgICAgICAgICAgIDwhLS0g5o+Q56S644CB5o+Q5Lqk5oyJ6ZKuIC0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNtcy1tc2ctaW5mb1wiPlxuICAgICAgICAgICAgICAgIDxzcGFuPntzcGFtSW5mb308L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgeyNpZiAhaXNTbGlkZX1cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInNtcy1idG4tc3VibWl0XCIgb246Y2xpY2s9XCJzcGFtU3VibWl0KGV2ZW50KVwiPlxuICAgICAgICAgICAgICAgICAgICB7YnRuVGV4dH1cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgey9pZn1cbiAgICAgICAgPC9mb3JtPlxuICAgICAgICB7I2lmIGlzU2xpZGV9XG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJzbXMtYnRuLXN1Ym1pdFwiIG9uOmNsaWNrPVwic3BhbVN1Ym1pdChldmVudClcIj5cbiAgICAgICAgICAgIHtidG5UZXh0fVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgey9pZn1cbiAgICA8L2Rpdj5cbjwvZGl2PlxuXG48c2NyaXB0PmltcG9ydCBmbHkgZnJvbSAnZmx5aW8nO1xuaW1wb3J0IHsgc3VibWl0VXJsLCBTRU5EX1NNU19DT0RFLCBWQUxJREFURV9JTUdfQ09ERSwgU01TX1NUQVRVUywgfSBmcm9tICcuLi9jb21tb24vY29uc3RhbnRzJztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBkYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWxpZGF0ZVR5cGU6IFwic21zXCIsXG4gICAgICAgICAgICBwaG9uZU51bWJlcjogXCJcIixcbiAgICAgICAgICAgIHNlY3JldFBob25lSWQ6IFwiXCIsXG4gICAgICAgICAgICBjYXB0Y2hhRGlhbG9nU2hvdzogdHJ1ZSxcbiAgICAgICAgICAgIGJ0blRleHQ6IFwi56Gu5a6aXCIsXG4gICAgICAgICAgICBzbXNTZW5kQnRuVGV4dDogXCLojrflj5bpqozor4HnoIFcIixcbiAgICAgICAgICAgIHZhbGlJbWdDb2RlOiBcIlwiLFxuICAgICAgICAgICAgdmFsaWRhdGVJbWdVcmw6IFwiXCIsXG4gICAgICAgICAgICBzbXNTdGF0dXM6IFNNU19TVEFUVVMuU01TX1ZBTElEQVRFX1NVQ0NFU1MsXG4gICAgICAgICAgICBzbXNCdG5BdmFsaWFibGU6IHRydWUsXG4gICAgICAgICAgICBpc1NsaWRlOiBmYWxzZSxcbiAgICAgICAgICAgIHNob3dBbmltYXRpb246IGZhbHNlLFxuICAgICAgICAgICAgc3BhbUluZm86IFwiXCIsXG4gICAgICAgICAgICBzdHlsZVByZWZpeDogXCJkZWZhdWx0XCIsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBvbmNyZWF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2EgPSB0aGlzLmdldCgpLCBjYXB0Y2hhRGlhbG9nU2hvdyA9IF9hLmNhcHRjaGFEaWFsb2dTaG93LCBpc1NsaWRlID0gX2EuaXNTbGlkZTtcbiAgICAgICAgY2FwdGNoYURpYWxvZ1Nob3cgJiYgaXNTbGlkZSAmJiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgX3RoaXMuc2V0KHsgc2hvd0FuaW1hdGlvbjogdHJ1ZSB9KTsgfSwgODApO1xuICAgICAgICB0aGlzLmluaXRWYWxpZGF0ZSgpO1xuICAgIH0sXG4gICAgY29tcHV0ZWQ6IHtcbiAgICAgICAgbmVlZEltZ1ZhbGlkYXRlOiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciB2YWxpZGF0ZVR5cGUgPSBfYS52YWxpZGF0ZVR5cGU7XG4gICAgICAgICAgICByZXR1cm4gdmFsaWRhdGVUeXBlID09PSBcInBpY19iZWZvcmVfc21zXCI7XG4gICAgICAgIH0sXG4gICAgICAgIG5lZWRTbXNWYWxpZGF0ZTogZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgdmFsaWRhdGVUeXBlID0gX2EudmFsaWRhdGVUeXBlO1xuICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRlVHlwZSA9PT0gXCJzbXNcIjtcbiAgICAgICAgfSxcbiAgICAgICAgZW5jcnlwdFBob25lTnVtYmVyOiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBwaG9uZU51bWJlciA9IF9hLnBob25lTnVtYmVyO1xuICAgICAgICAgICAgcmV0dXJuIChcIlwiICsgcGhvbmVOdW1iZXIpLnJlcGxhY2UoL14oXFxkezN9KVxcZHs0fShcXGR7NH0pJC8sIGZ1bmN0aW9uIChfLCAkMSwgJDIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJDEgKyBcIioqKipcIiArICQyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGlzSW1nRXJyb3I6IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIHNtc1N0YXR1cyA9IF9hLnNtc1N0YXR1cztcbiAgICAgICAgICAgIHJldHVybiBzbXNTdGF0dXMgPT09IFNNU19TVEFUVVMuTkVFRF9QSUNfVkFMSURBVEUgfHwgc21zU3RhdHVzID09PSBTTVNfU1RBVFVTLlBJQ19WQUxJREFURV9GQUlMO1xuICAgICAgICB9LFxuICAgICAgICBpc1Ntc0Vycm9yOiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBzbXNTdGF0dXMgPSBfYS5zbXNTdGF0dXM7XG4gICAgICAgICAgICByZXR1cm4gc21zU3RhdHVzID09PSBTTVNfU1RBVFVTLlNNU19WQUxJREFURV9GQUlMO1xuICAgICAgICB9LFxuICAgICAgICB0aXRsZU5vdGU6IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIHZhbGlkYXRlVHlwZSA9IF9hLnZhbGlkYXRlVHlwZSwgZW5jcnlwdFBob25lTnVtYmVyID0gX2EuZW5jcnlwdFBob25lTnVtYmVyO1xuICAgICAgICAgICAgdmFyIHBob25lID0gZW5jcnlwdFBob25lTnVtYmVyIHx8ICfmgqjnmoTlj7fnoIEnO1xuICAgICAgICAgICAgc3dpdGNoICh2YWxpZGF0ZVR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwicGljX2JlZm9yZV9zbXNcIjoge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGhvbmUgKyBcIlxcdTgzQjdcXHU1M0Q2XFx1OUE4Q1xcdThCQzFcXHU3ODAxXFx1OEZDN1xcdTRFOEVcXHU5ODkxXFx1N0U0MVxcdUZGMENcXHU5NzAwXFx1OEZEQlxcdTg4NENcXHU1NkZFXFx1NUY2MlxcdTlBOENcXHU4QkMxXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgXCJzbXNcIjoge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcXHU3N0VEXFx1NEZFMVxcdTlBOENcXHU4QkMxXFx1NzgwMVxcdTVERjJcXHU1M0QxXFx1OTAwMVxcdTgxRjNcIiArIHBob25lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlxcdTc3RURcXHU0RkUxXFx1OUE4Q1xcdThCQzFcXHU3ODAxXFx1NURGMlxcdTUzRDFcXHU5MDAxXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBtZXRob2RzOiB7XG4gICAgICAgIGluaXRWYWxpZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hID0gdGhpcy5nZXQoKSwgdmFsaWRhdGVUeXBlID0gX2EudmFsaWRhdGVUeXBlLCB2YWxpZGF0ZUltZ1VybCA9IF9hLnZhbGlkYXRlSW1nVXJsLCBwaG9uZU51bWJlciA9IF9hLnBob25lTnVtYmVyO1xuICAgICAgICAgICAgc3dpdGNoICh2YWxpZGF0ZVR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwicGljX2JlZm9yZV9zbXNcIjoge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldCh7IHNtc0J0bkF2YWxpYWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgIXZhbGlkYXRlSW1nVXJsICYmIHRoaXMucmVmcmVzaEltYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFwic21zXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3VudERvd25JbmZvKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjbG9zZUNhcHRjaGE6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KHsgY2FwdGNoYURpYWxvZ1Nob3c6IGZhbHNlIH0pO1xuICAgICAgICAgICAgdGhpcy5maXJlKFwiY2xvc2VcIik7XG4gICAgICAgIH0sXG4gICAgICAgIGJhY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmZpcmUoXCJiYWNrXCIpO1xuICAgICAgICAgICAgdGhpcy5zZXQoeyBzaG93QW5pbWF0aW9uOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICAvLyB0aGlzLnNldCh7IGNhcHRjaGFEaWFsb2dTaG93OiBmYWxzZSB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLy8g6aqM6K+B56CB5o+Q5LqkXG4gICAgICAgIHNwYW1TdWJtaXQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLmdldCgpLCBwaG9uZU51bWJlciA9IF9hLnBob25lTnVtYmVyLCBzZWNyZXRQaG9uZUlkID0gX2Euc2VjcmV0UGhvbmVJZDtcbiAgICAgICAgICAgIHZhciBfYiA9IHRoaXMudmFsaWRhdGVDb2RlKCksIHN0YXRlID0gX2Iuc3RhdGUsIHJlYXNvbiA9IF9iLnJlYXNvbjtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiPj4+XCIsIHN0YXRlLCByZWFzb24pO1xuICAgICAgICAgICAgaWYgKHN0YXRlICE9PSBTTVNfU1RBVFVTLlNNU19WQUxJREFURV9TVUNDRVNTKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoe1xuICAgICAgICAgICAgICAgICAgICBzcGFtSW5mbzogcmVhc29uLFxuICAgICAgICAgICAgICAgICAgICBzbXNTdGF0dXM6IHN0YXRlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0KHsgc21zU3RhdHVzOiBTTVNfU1RBVFVTLlNNU19WQUxJREFURV9TVUNDRVNTIH0pO1xuICAgICAgICAgICAgZmx5LnBvc3Qoc3VibWl0VXJsLCB7XG4gICAgICAgICAgICAgICAgcGhvbmVfbnVtYmVyOiBwaG9uZU51bWJlcixcbiAgICAgICAgICAgICAgICBzZWNyZXRfcGhvbmVfaWQ6IHNlY3JldFBob25lSWQsXG4gICAgICAgICAgICAgICAgc21zX2NvZGU6IHRoaXMuZ2V0U21zQ29kZSgpLFxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICByZXMuZGF0YSAmJiByZXMuZGF0YS52YWxpZGF0ZV9pbmZvICYmIF90aGlzLmhhbmRsZVZhbGlkYXRlUmVzdWx0KHJlcy5kYXRhLnZhbGlkYXRlX2luZm8pO1xuICAgICAgICAgICAgICAgIF90aGlzLmZpcmUoXCJzdWJtaXRcIiwgeyByZXNwb25zZTogcmVzIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmlyZShcInN1Y2Nlc3NcIiwgeyByZXNwb25zZTogcmVzLCBzbXNfdGlja2V0OiByZXMuZGF0YS5zbXNfdGlja2V0IH0pO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZUNhcHRjaGEoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNldCh7IHNwYW1JbmZvOiByZXMubWVzc2FnZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5maXJlKFwiZXJyb3JcIiwgeyBlcnJvcjogZXJyb3IgfSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0KHsgc3BhbUluZm86IGVycm9yLnN0YXR1cyArIFwiOiBcIiArIGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLy8g5Y+R55+t5L+h6aqM6K+B56CBXG4gICAgICAgIHNlbmRTbXNDb2RlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIF9hID0gdGhpcy5nZXQoKSwgbmVlZEltZ1ZhbGlkYXRlID0gX2EubmVlZEltZ1ZhbGlkYXRlLCB2YWxpSW1nQ29kZSA9IF9hLnZhbGlJbWdDb2RlLCBwaG9uZU51bWJlciA9IF9hLnBob25lTnVtYmVyLCBzZWNyZXRQaG9uZUlkID0gX2Euc2VjcmV0UGhvbmVJZCwgc21zQnRuQXZhbGlhYmxlID0gX2Euc21zQnRuQXZhbGlhYmxlO1xuICAgICAgICAgICAgaWYgKG5lZWRJbWdWYWxpZGF0ZSAmJiAhdmFsaUltZ0NvZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldCh7XG4gICAgICAgICAgICAgICAgICAgIHNwYW1JbmZvOiBcIuWbvueJh+mqjOivgeeggeS4jeiDveS4uuepulwiLFxuICAgICAgICAgICAgICAgICAgICBzbXNTdGF0dXM6IFNNU19TVEFUVVMuUElDX1ZBTElEQVRFX0ZBSUxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldCh7IHNtc1N0YXR1czogU01TX1NUQVRVUy5TTVNfVkFMSURBVEVfU1VDQ0VTUyB9KTtcbiAgICAgICAgICAgIHNtc0J0bkF2YWxpYWJsZSAmJiBmbHkucG9zdChTRU5EX1NNU19DT0RFLCB7XG4gICAgICAgICAgICAgICAgcGljX2NvZGU6IHZhbGlJbWdDb2RlLFxuICAgICAgICAgICAgICAgIHBob25lX251bWJlcjogcGhvbmVOdW1iZXIsXG4gICAgICAgICAgICAgICAgc2VjcmV0X3Bob25lX2lkOiBzZWNyZXRQaG9uZUlkLFxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci5kYXRhOyB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVWYWxpZGF0ZVJlc3VsdChyZXMpO1xuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0KHsgc3BhbUluZm86IGVycm9yLnN0YXR1cyArIFwiOiBcIiArIGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFuZGxlVmFsaWRhdGVSZXN1bHQ6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIGlmIChyZXMgPT09IHZvaWQgMCkgeyByZXMgPSB7fTsgfVxuICAgICAgICAgICAgdmFyIHZhbGlkYXRlSW1nVXJsID0gdGhpcy5nZXQoKS52YWxpZGF0ZUltZ1VybDtcbiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSBTTVNfU1RBVFVTLlNNU19TRU5EX1NVQ0NFU1MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldCh7IHNwYW1JbmZvOiBcIlwiIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuY291bnREb3duSW5mbygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzLnBpY191cmwgJiYgdGhpcy5zZXQoe1xuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZVR5cGU6IFwicGljX2JlZm9yZV9zbXNcIixcbiAgICAgICAgICAgICAgICAgICAgc21zU3RhdHVzOiByZXMuc3RhdHVzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoe1xuICAgICAgICAgICAgICAgICAgICBzcGFtSW5mbzogcmVzLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlSW1nVXJsOiByZXMucGljX3VybCB8fCB2YWxpZGF0ZUltZ1VybFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjb3VudERvd25JbmZvOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNvdW50ID0gNjA7XG4gICAgICAgICAgICB2YXIgdGltZXIgPSBudWxsO1xuICAgICAgICAgICAgdmFyIHNtc0J0bkF2YWxpYWJsZSA9IHRoaXMuZ2V0KCkuc21zQnRuQXZhbGlhYmxlO1xuICAgICAgICAgICAgdmFyIHJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNldCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbXNCdG5BdmFsaWFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzbXNTZW5kQnRuVGV4dDogXCLojrflj5bpqozor4HnoIFcIlxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0KHsgc21zQnRuQXZhbGlhYmxlOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXQoe1xuICAgICAgICAgICAgICAgICAgICBzbXNTZW5kQnRuVGV4dDogXCJcXHU5MUNEXFx1NjVCMFxcdTgzQjdcXHU1M0Q2KFwiICsgY291bnQtLSArIFwiKVwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KHJ1biwgMTAwMCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcnVuKCk7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIOWIt+aWsOWbvueJh+mqjOivgeeggVxuICAgICAgICByZWZyZXNoSW1hZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLmdldCgpLCBwaG9uZU51bWJlciA9IF9hLnBob25lTnVtYmVyLCBzZWNyZXRQaG9uZUlkID0gX2Euc2VjcmV0UGhvbmVJZCwgdmFsaWRhdGVJbWdVcmwgPSBfYS52YWxpZGF0ZUltZ1VybDtcbiAgICAgICAgICAgIGZseS5wb3N0KFZBTElEQVRFX0lNR19DT0RFLCB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgICAgIHBob25lX251bWJlcjogcGhvbmVOdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIHNlY3JldF9waG9uZV9pZDogc2VjcmV0UGhvbmVJZCxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIHJlcy5kYXRhOyB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXQoe1xuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUltZ1VybDogcmVzLnBpY191cmwgfHwgdmFsaWRhdGVJbWdVcmxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIF90aGlzLnNldCh7IHNwYW1JbmZvOiBlcnJvci5zdGF0dXMgKyBcIjogXCIgKyBlcnJvci5tZXNzYWdlIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHZhbGlkYXRlQ29kZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hID0gdGhpcy5nZXQoKSwgbmVlZEltZ1ZhbGlkYXRlID0gX2EubmVlZEltZ1ZhbGlkYXRlLCB2YWxpSW1nQ29kZSA9IF9hLnZhbGlJbWdDb2RlO1xuICAgICAgICAgICAgaWYgKG5lZWRJbWdWYWxpZGF0ZSAmJiAhdmFsaUltZ0NvZGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZTogU01TX1NUQVRVUy5QSUNfVkFMSURBVEVfRkFJTCxcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBcIuWbvueJh+mqjOivgeeggeS4jeiDveS4uuepulwiLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuZ2V0U21zQ29kZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGU6IFNNU19TVEFUVVMuU01TX1ZBTElEQVRFX0ZBSUwsXG4gICAgICAgICAgICAgICAgICAgIHJlYXNvbjogXCLnn63kv6Hpqozor4HnoIHkuI3og73kuLrnqbpcIixcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogU01TX1NUQVRVUy5TTVNfVkFMSURBVEVfU1VDQ0VTUyxcbiAgICAgICAgICAgICAgICByZWFzb246IFwiXCJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGdldFNtc0NvZGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZnMuc21zLnZhbHVlLnRyaW0oKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb2R1bGUuanMubWFwPC9zY3JpcHQ+XG5cbjxzdHlsZT5cblxuOmdsb2JhbChodG1sLCBib2R5KSB7XG4gICAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiByZ2JhKDAsMCwwLDApO1xufVxuXG4udmFsaWRhdGUtY2FwdGNoYS13cmFwcGVyIHtcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgbGVmdDogMDtcbiAgICB0b3A6IDA7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC41KTtcbiAgICB6LWluZGV4OiA5OTk7XG4gICAgLXdlYmtpdC10cmFuc2l0aW9uOiAwLjNzO1xuICAgIHRyYW5zaXRpb246IDAuM3M7XG5cbn1cblxuLnZhbGlkYXRlLWNhcHRjaGEtd3JhcHBlci5zbGlkZUxlZnQge1xuICAgICAgICB6LWluZGV4OiBhdXRvO1xuICAgICAgICB6LWluZGV4OiBpbml0aWFsO1xuICAgICAgICBsZWZ0OiBhdXRvO1xuICAgICAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgIH1cblxuLnZhbGlkYXRlLWNhcHRjaGEtd3JhcHBlciAudmFsaWRhdGUtZGlhbG9nIHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBwYWRkaW5nOiAyNHB4IDI3cHggMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgei1pbmRleDogMTAwMDtcbiAgICAgICAgdG9wOiAxNjRweDtcbiAgICAgICAgd2lkdGg6IDkwJTtcbiAgICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgfVxuXG4udmFsaWRhdGUtY2FwdGNoYS13cmFwcGVyLnNsaWRlTGVmdCAudmFsaWRhdGUtZGlhbG9nIHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHBhZGRpbmc6IDQwcHggMjRweCAwO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgIH1cblxuLnZhbGlkYXRlLWNhcHRjaGEtd3JhcHBlci5zbGlkZUxlZnQgLmJhY2stY29udGFpbmVyIHtcbiAgICAgICAgd2lkdGg6IDM0cHg7XG4gICAgICAgIGhlaWdodDogMzJweDtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIGxlZnQ6IDA7XG4gICAgfVxuXG4udmFsaWRhdGUtY2FwdGNoYS13cmFwcGVyLnNsaWRlTGVmdCAuYmFjay1jb250YWluZXIgLmJhY2sge1xuICAgICAgICAgICAgd2lkdGg6IDE4cHg7XG4gICAgICAgICAgICBoZWlnaHQ6IDE1cHg7XG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICB0b3A6IDE2cHg7XG4gICAgICAgICAgICBsZWZ0OiAxNnB4O1xuICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB2aWV3Qm94PScwIDAgMTggMTUnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyclM0UlM0NwYXRoIGQ9J00yLjcgOC4yNzJoMTQuNTEyYy40NSAwIC43ODgtLjMzLjc4OC0uNzY5cy0uMzM3LS43NjgtLjc4OC0uNzY4SDIuN2w1LjQtNS4zODNjLjMzOC0uMzMuMzM4LS43NjggMC0xLjA5OC0uMzM3LS4zMy0uNzg3LS4zMy0xLjEyNSAwbC02Ljc1IDYuN2EuODI5LjgyOSAwIDAgMC0uMjI1LjU1YzAgLjIyLjExMy40MzkuMjI1LjU0OWw2Ljc1IDYuN2MuMzM4LjMzLjc4OC4zMyAxLjEyNSAwIC4zMzgtLjMzLjMzOC0uNzY5IDAtMS4wOTlMMi43IDguMjcyeicgZmlsbD0nJTIzNjY2JyBmaWxsLXJ1bGU9J25vbnplcm8nLyUzRSUzQy9zdmclM0VcIik7XG4gICAgICAgIH1cblxuLnZhbGlkYXRlLWNhcHRjaGEtd3JhcHBlciAuY2xvc2Uge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogMXB4O1xuICAgICAgICByaWdodDogMTBweDtcbiAgICAgICAgY29sb3I6ICAjRDdEN0Q3O1xuICAgICAgICBmb250LXNpemU6IDI1cHg7XG4gICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoNDVkZWcpO1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTtcbiAgICB9XG5cbi52YWxpZGF0ZS1jYXB0Y2hhLXdyYXBwZXIgLnRpdGxlIHtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICBjb2xvcjogIzMzMztcbiAgICB9XG5cbi52YWxpZGF0ZS1jYXB0Y2hhLXdyYXBwZXIgLnN1Yi10aXRsZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgbWFyZ2luLXRvcDogMjFweDtcbiAgICAgICAgY29sb3I6ICM5OTk5OTk7XG4gICAgfVxuXG4udmFsaWRhdGUtY2FwdGNoYS13cmFwcGVyIGZvcm0ge1xuICAgICAgICBwYWRkaW5nOiAyNHB4IDExcHg7XG4gICAgfVxuXG4udmFsaWRhdGUtY2FwdGNoYS13cmFwcGVyLnNsaWRlTGVmdCBmb3JtIHtcbiAgICAgICAgcGFkZGluZy1sZWZ0OiAwO1xuICAgICAgICBwYWRkaW5nLXJpZ2h0OiAwO1xuICAgIH1cblxuLnZhbGlkYXRlLWNhcHRjaGEtd3JhcHBlciAucGljLXZhbGlkYXRlLCAudmFsaWRhdGUtY2FwdGNoYS13cmFwcGVyIC5zbXMtdmFsaWRhdGUge1xuICAgICAgICBoZWlnaHQ6IDQzcHg7XG4gICAgICAgIGRpc3BsYXk6IC13ZWJraXQtYm94O1xuICAgICAgICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIC13ZWJraXQtYm94LWFsaWduOiBlbmQ7XG4gICAgICAgIC13ZWJraXQtYWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcbiAgICB9XG5cbi52YWxpZGF0ZS1jYXB0Y2hhLXdyYXBwZXIgLnNtcy12YWxpZGF0ZSB7XG4gICAgICAgIGJvcmRlci1ib3R0b206ICAxcHggc29saWQgI0VBRUFFQTtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cblxuLnZhbGlkYXRlLWNhcHRjaGEtd3JhcHBlciBpbnB1dCB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgcGFkZGluZzogMCAxcHg7XG4gICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgLXdlYmtpdC1ib3gtZmxleDogMTtcbiAgICAgICAgLXdlYmtpdC1mbGV4LWdyb3c6IDE7XG4gICAgICAgICAgICAgICAgZmxleC1ncm93OiAxO1xuICAgICAgICBjb2xvcjogIzMzMztcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogIDFweCBzb2xpZCAjRUFFQUVBO1xuICAgIH1cblxuLnZhbGlkYXRlLWNhcHRjaGEtd3JhcHBlciAuc21zLWNhcHRjaGEge1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgfVxuXG4udmFsaWRhdGUtY2FwdGNoYS13cmFwcGVyIC52YWxpZGF0ZS1pbWcge1xuICAgICAgICB3aWR0aDogNzRweDtcbiAgICAgICAgaGVpZ2h0OiAzMnB4O1xuICAgICAgICBtYXJnaW4tbGVmdDogMTRweDtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgIH1cblxuLnZhbGlkYXRlLWNhcHRjaGEtd3JhcHBlciAuc2VuZC1zbXMge1xuICAgICAgICB3aWR0aDogOTRweDtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBsaW5lLWhlaWdodDogNDNweDtcbiAgICAgICAgY29sb3I6ICMzQjlBRkY7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgcmlnaHQ6IDBweDtcbiAgICB9XG5cbi52YWxpZGF0ZS1jYXB0Y2hhLXdyYXBwZXIgLnNtcy1tc2ctaW5mbyB7XG4gICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICAgIG1hcmdpbi10b3A6IDRweDtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBjb2xvcjogI0ZGNDQ0NDtcbiAgICAgICAgaGVpZ2h0OiAzNHB4O1xuICAgIH1cblxuLnZhbGlkYXRlLWNhcHRjaGEtd3JhcHBlciAuc21zLWJ0bi1zdWJtaXQge1xuICAgICAgICB3aWR0aDogOTclO1xuICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgIGhlaWdodDogNDhweDtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzNCOUFGRjtcbiAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwMHB4O1xuICAgICAgICBmb250LXNpemU6IDE4cHg7XG4gICAgfVxuXG4udmFsaWRhdGUtY2FwdGNoYS13cmFwcGVyLnNsaWRlTGVmdCAuc21zLWJ0bi1zdWJtaXQge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGJvdHRvbTogMjRweDtcbiAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpO1xuICAgICAgICB3aWR0aDogY2FsYygxMDAlIC0gMjRweCAtIDI0cHgpO1xuICAgIH1cbjwvc3R5bGU+Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTBTUSxVQUFVLEFBQUUsQ0FBQyxBQUNqQiwyQkFBMkIsQ0FBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxBQUM5QyxDQUFDLEFBRUQseUJBQXlCLGVBQUMsQ0FBQyxBQUN2QixRQUFRLENBQUUsS0FBSyxDQUNmLElBQUksQ0FBRSxDQUFDLENBQ1AsR0FBRyxDQUFFLENBQUMsQ0FDTixLQUFLLENBQUUsSUFBSSxDQUNYLE1BQU0sQ0FBRSxJQUFJLENBQ1osVUFBVSxDQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQzlCLE9BQU8sQ0FBRSxHQUFHLENBQ1osa0JBQWtCLENBQUUsSUFBSSxDQUN4QixVQUFVLENBQUUsSUFBSSxBQUVwQixDQUFDLEFBRUQseUJBQXlC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 */",e(document.head,t)),this._fragment=function(g,I){var t,d,B,u,F,U,Q,p,b,x,h,m,G,X,N,S,v,R,D,W,E,w,Y,H,J,j,T,z,M,k,O=!1,_=I.isSlide&&Z(g),P=!I.isSlide&&L(g);function K(){O=!0,g.set({valiImgCode:X.value}),O=!1}function q(I){g.refreshImage()}function $(I){g.sendSmsCode()}var gg=!I.isSlide&&f(g,I),Ig=I.isSlide&&V(g,I);return{c:function(){t=s("div"),d=s("div"),_&&_.c(),B=a("\n\n        \n        "),P&&P.c(),u=a("\n\n        "),F=s("div"),(U=s("span")).textContent="手机验证",Q=a("\n\n        "),p=s("div"),b=s("span"),x=a(I.titleNote),h=a("\n\n        "),m=s("form"),G=s("div"),X=s("input"),N=a("\n                "),S=s("img"),v=a("\n    \n            \n            "),R=s("div"),D=s("input"),W=a("\n                "),E=s("span"),w=s("span"),Y=a(I.smsSendBtnText),H=a("\n    \n            \n            "),J=s("div"),j=s("span"),T=a(I.spamInfo),z=a("\n\n            "),gg&&gg.c(),M=a("\n        "),Ig&&Ig.c(),C(U,y,17,12,583),F.className="title svelte-1gpyj4v",C(F,y,16,8,551),C(b,y,21,12,661),p.className="sub-title svelte-1gpyj4v",C(p,y,20,8,625),c(X,"input",K),l(X,"type","text"),X.className="validate-item pic-captcha svelte-1gpyj4v",X.placeholder="请输入图片验证码",r(X,"border-bottom-color",I.isImgError?"#FF4444":""),C(X,y,28,16,854),c(S,"click",q),S.className="validate-img validate-item svelte-1gpyj4v",S.src=I.validateImgUrl,S.alt="pic",C(S,y,29,16,1031),G.className="pic-validate svelte-1gpyj4v",r(G,"display",I.needImgValidate?"flex":"none"),C(G,y,27,12,759),l(D,"type","number"),D.className="validate-item sms-captcha svelte-1gpyj4v",D.placeholder="请输入短信验证码",C(D,y,34,16,1344),w.className="text",C(w,y,36,20,1624),c(E,"click",$),E.className="validate-item send-sms svelte-1gpyj4v",l(E,"origin-text","获取验证码"),r(E,"color",I.smsBtnAvaliable?"#3B9AFF":"rgba(181,181,181,0.50)"),C(E,y,35,16,1449),R.className="sms-validate svelte-1gpyj4v",r(R,"border-bottom-color",I.isSmsError?"#FF4444":""),r(R,"margin-top",I.needImgValidate?"27px":"0"),C(R,y,33,12,1196),C(j,y,42,16,1801),J.className="sms-msg-info svelte-1gpyj4v",C(J,y,41,12,1758),m.className="svelte-1gpyj4v",C(m,y,24,8,712),d.className="validate-dialog svelte-1gpyj4v",C(d,y,1,4,209),t.className=k="validate-captcha-wrapper "+I.stylePrefix+" "+(I.isSlide?"slideLeft":"")+" svelte-1gpyj4v",r(t,"transform","translateX("+(I.showAnimation||!I.isSlide?"0":"100%")+")"),r(t,"display",I.captchaDialogShow?"block":"none"),C(t,y,0,0,0)},m:function(C,i){A(C,t,i),e(t,d),_&&_.m(d,null),e(d,B),P&&P.m(d,null),e(d,u),e(d,F),e(F,U),e(d,Q),e(d,p),e(p,b),e(b,x),e(d,h),e(d,m),e(m,G),e(G,X),X.value=I.valiImgCode,e(G,N),e(G,S),e(m,v),e(m,R),e(R,D),g.refs.sms=D,e(R,W),e(R,E),e(E,w),e(w,Y),e(m,H),e(m,J),e(J,j),e(j,T),e(m,z),gg&&gg.m(m,null),e(d,M),Ig&&Ig.m(d,null)},p:function(I,C){C.isSlide?_||((_=Z(g)).c(),_.m(d,B)):_&&(_.d(1),_=null),C.isSlide?P&&(P.d(1),P=null):P||((P=L(g)).c(),P.m(d,u)),I.titleNote&&o(x,C.titleNote),!O&&I.valiImgCode&&(X.value=C.valiImgCode),I.isImgError&&r(X,"border-bottom-color",C.isImgError?"#FF4444":""),I.validateImgUrl&&(S.src=C.validateImgUrl),I.needImgValidate&&r(G,"display",C.needImgValidate?"flex":"none"),I.smsSendBtnText&&o(Y,C.smsSendBtnText),I.smsBtnAvaliable&&r(E,"color",C.smsBtnAvaliable?"#3B9AFF":"rgba(181,181,181,0.50)"),I.isSmsError&&r(R,"border-bottom-color",C.isSmsError?"#FF4444":""),I.needImgValidate&&r(R,"margin-top",C.needImgValidate?"27px":"0"),I.spamInfo&&o(T,C.spamInfo),C.isSlide?gg&&(gg.d(1),gg=null):gg?gg.p(I,C):((gg=f(g,C)).c(),gg.m(m,null)),C.isSlide?Ig?Ig.p(I,C):((Ig=V(g,C)).c(),Ig.m(d,null)):Ig&&(Ig.d(1),Ig=null),(I.stylePrefix||I.isSlide)&&k!==(k="validate-captcha-wrapper "+C.stylePrefix+" "+(C.isSlide?"slideLeft":"")+" svelte-1gpyj4v")&&(t.className=k),(I.showAnimation||I.isSlide)&&r(t,"transform","translateX("+(C.showAnimation||!C.isSlide?"0":"100%")+")"),I.captchaDialogShow&&r(t,"display",C.captchaDialogShow?"block":"none")},d:function(I){I&&i(t),_&&_.d(),P&&P.d(),n(X,"input",K),n(S,"click",q),g.refs.sms===D&&(g.refs.sms=null),n(E,"click",$),gg&&gg.d(),Ig&&Ig.d()}}}(this,this._state),this.root._oncreate.push(function(){(function(){var g=this,I=this.get(),C=I.captchaDialogShow,t=I.isSlide;C&&t&&setTimeout(function(){g.set({showAnimation:!0})},80),this.initValidate()}).call(u),u.fire("update",{changed:function(g,I){for(var C in I)g[C]=1;return g}({},u._state),current:u._state})}),g.target){if(g.hydrate)throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");this._fragment.c(),this._mount(g.target,g.anchor),B(this)}}return I(S.prototype,F),I(S.prototype,N),S.prototype._checkReadOnly=function(g){if("needImgValidate"in g&&!this._updatingReadonlyProperty)throw new Error("<Captcha>: Cannot set read-only property 'needImgValidate'");if("needSmsValidate"in g&&!this._updatingReadonlyProperty)throw new Error("<Captcha>: Cannot set read-only property 'needSmsValidate'");if("encryptPhoneNumber"in g&&!this._updatingReadonlyProperty)throw new Error("<Captcha>: Cannot set read-only property 'encryptPhoneNumber'");if("isImgError"in g&&!this._updatingReadonlyProperty)throw new Error("<Captcha>: Cannot set read-only property 'isImgError'");if("isSmsError"in g&&!this._updatingReadonlyProperty)throw new Error("<Captcha>: Cannot set read-only property 'isSmsError'");if("titleNote"in g&&!this._updatingReadonlyProperty)throw new Error("<Captcha>: Cannot set read-only property 'titleNote'")},S.prototype._recompute=function(g,I){this._differs(I.needImgValidate,I.needImgValidate="pic_before_sms"===t(I,"needImgValidate").validateType)&&(g.needImgValidate=!0),this._differs(I.needSmsValidate,I.needSmsValidate=function(g){return"sms"===g.validateType}(t(I,"needSmsValidate")))&&(g.needSmsValidate=!0),this._differs(I.encryptPhoneNumber,I.encryptPhoneNumber=function(g){return(""+g.phoneNumber).replace(/^(\d{3})\d{4}(\d{4})$/,function(g,I,C){return I+"****"+C})}(t(I,"encryptPhoneNumber")))&&(g.encryptPhoneNumber=!0),this._differs(I.isImgError,I.isImgError=function(g){var I=g.smsStatus;return I===G.NEED_PIC_VALIDATE||I===G.PIC_VALIDATE_FAIL}(t(I,"isImgError")))&&(g.isImgError=!0),this._differs(I.isSmsError,I.isSmsError=function(g){return g.smsStatus===G.SMS_VALIDATE_FAIL}(t(I,"isSmsError")))&&(g.isSmsError=!0),this._differs(I.titleNote,I.titleNote=function(g){var I=g.validateType,C=g.encryptPhoneNumber||"您的号码";switch(I){case"pic_before_sms":return C+"获取验证码过于频繁，需进行图形验证";case"sms":return"短信验证码已发送至"+C;default:return"短信验证码已发送"}}(t(I,"titleNote")))&&(g.titleNote=!0)},{create:function(g,I){return new S({target:I||document.querySelector("body"),data:g})}}}();
